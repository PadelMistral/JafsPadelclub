<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#020617">
    <title>Calendario | Padeluminatis Pro</title>
    <meta name="description" content="Reserva pistas y organiza tus partidos">
    <link rel="icon" type="image/x-icon" href="./imagenes/Logojafs.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <!-- Core Bundle: design-system + layout + components-premium + themes + dynamic-elements -->
    <link rel="stylesheet" href="./css/core-bundle.css">
    <link rel="stylesheet" href="./css/themes.css">
    <link rel="stylesheet" href="./css/calendar.css">
    <!-- Premium V7 Styles (New Design - High Priority) -->
    <link rel="stylesheet" href="./css/premium-v7.css">
    <link rel="stylesheet" href="./css/final-premium.css">
</head>

<body>
    <!-- Galactic Background -->
    <div class="sport-bg"></div>

    <main class="page-content calendar-main-v5" style="padding-top: 75px; padding-bottom: 95px;">
        <div class="container px-2">

            <!-- Calendar Header Bar -->
            <div class="cal-controls-v5 animate-fade-in">
                <div class="cal-clock-box">
                    <span id="current-time-v5">00:00:00</span>
                    <span id="current-date-v5">CARGANDO...</span>
                </div>

                <div class="cal-week-nav">
                    <button id="btn-prev" class="btn-cal-nav"><i class="fas fa-chevron-left"></i></button>
                    <div class="cal-week-info">
                        <h2 id="week-range-text">-- - --</h2>
                        <span id="month-year-text">---</span>
                    </div>
                    <button id="btn-next" class="btn-cal-nav"><i class="fas fa-chevron-right"></i></button>
                </div>

                <div class="cal-location-box">
                    <span class="loc-city"><i class="fas fa-location-dot"></i> BENICALAP</span>
                    <span class="loc-sub">VALENCIA</span>
                </div>
            </div>

            <!-- Calendar Grid -->
            <div class="calendar-wrapper-v5 mt-2 animate-fade-in" style="animation-delay: 0.1s;">
                <div id="calendar-grid-v5" class="calendar-grid-v5">
                    <!-- Injected by JS -->
                    <div class="p-10 text-center opacity-50">
                        <div class="spinner-neon mx-auto"></div>
                        <p class="mt-4 text-xs">Cargando grilla galáctica...</p>
                    </div>
                </div>
            </div>

            <!-- Legend Overlay -->
            <div class="cal-legend-v5 mt-2 animate-fade-in" style="animation-delay: 0.2s;">
                <div class="legend-item-v5">
                    <span class="dot libre"></span>
                    <span class="label">LIBRE</span>
                </div>
                <div class="legend-item-v5">
                    <span class="dot abierta"></span>
                    <span class="label">ABIERTA</span>
                </div>
                <div class="legend-item-v5">
                    <span class="dot cerrada"></span>
                    <span class="label">CERRADA</span>
                </div>
                <div class="legend-item-v5">
                    <span class="dot propia"></span>
                    <span class="label">MÍA</span>
                </div>
            </div>

            <!-- Hint -->
            <div class="cal-hint-v5 text-center mt-3 opacity-40">
                <i class="fas fa-circle-info mr-1"></i> Toca una celda para reservar o ver detalles
            </div>

        </div>
    </main>

    <!-- Unified Match Modal (Bottom Sheet Style) -->
    <div id="modal-match" class="modal-overlay">
        <div class="modal-card glass-strong slide-up">
            <div class="modal-header">
                <div class="flex-col">
                    <h3 class="modal-title text-accent" id="modal-titulo">RESERVA</h3>
                    <span class="text-xs text-muted">Gestión de pista</span>
                </div>
                <button class="close-btn"
                    onclick="document.getElementById('modal-match').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body scroll-y" id="match-detail-area" style="max-height: 80vh;">
                <!-- Content via JS -->
            </div>
        </div>
    </div>

    <!-- Premium User Picker Modal -->
    <div id="modal-user-picker" class="modal-overlay">
        <div class="modal-sheet">
            <div class="modal-header-row mb-2">
                <h3 class="modal-title">AÑADIR JUGADOR</h3>
                <button class="btn-icon-glass sm"
                    onclick="document.getElementById('modal-user-picker').classList.remove('active')"><i
                        class="fas fa-times"></i></button>
            </div>

            <div class="p-4 pt-0 h-full flex-col">
                <div class="search-bar-premium mb-4">
                    <i class="fas fa-search text-muted"></i>
                    <input type="text" placeholder="Buscar por nombre..." oninput="handleSelectorSearch(this.value)">
                </div>

                <div id="user-picker-list" class="flex-col gap-2 overflow-y-auto custom-scroll flex-1">
                    <!-- Injected via JS -->
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="./js/calendario.js?v=6.5"></script>
    <script type="module">
        import { initGalaxyBackground } from './js/modules/galaxy-bg.js?v=6.5';
        import { initThemeSystem } from './js/modules/theme-manager.js?v=6.5';
        initThemeSystem();
        initGalaxyBackground();
    </script>
</body>

</html>