<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#020617">
    <title>Recuperar Contraseña | Padeluminatis Pro</title>
    <meta name="description" content="Recupera tu acceso a Padeluminatis">
    <link rel="icon" href="./imagenes/Logojafs.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/design-system.css">
    <link rel="stylesheet" href="./css/themes.css">
    <link rel="stylesheet" href="./css/components-premium.css">
    <link rel="stylesheet" href="./css/auth.css">
</head>

<body>
    <!-- Galactic Background -->
    <div class="sport-bg"></div>

    <main class="auth-screen">
        <div class="auth-container animate-fade-in">

            <!-- Icon -->
            <div class="auth-icon-wrapper">
                <div class="auth-icon">
                    <i class="fas fa-key"></i>
                </div>
                <div class="auth-icon-ring"></div>
            </div>

            <!-- Title -->
            <h1 class="auth-title">Restablecer Acceso</h1>
            <p class="auth-subtitle">Introduce tu email para recibir un enlace de recuperación</p>

            <!-- Form -->
            <div class="auth-form">
                <div class="form-group">
                    <label class="form-label">Email de tu cuenta</label>
                    <div class="input-icon-wrapper">
                        <i class="fas fa-envelope input-icon"></i>
                        <input type="email" id="reset-email" class="input input-with-icon" placeholder="tu@email.com">
                    </div>
                </div>

                <button class="btn btn-primary btn-lg w-full" id="btn-reset">
                    <i class="fas fa-paper-plane"></i> Enviar Enlace
                </button>
            </div>

            <!-- Success State (hidden by default) -->
            <div id="success-state" class="success-state hidden">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2 class="success-title">¡Enlace Enviado!</h2>
                <p class="success-text">Revisa tu bandeja de entrada y sigue las instrucciones.</p>
            </div>

            <!-- Back Link -->
            <div class="auth-footer">
                <a href="index.html" class="back-link">
                    <i class="fas fa-arrow-left"></i> Volver al Acceso
                </a>
            </div>

        </div>
    </main>

    <script type="module">
        import { auth } from './js/firebase-service.js';
        import { sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-auth.js";
        import { showToast } from './js/ui-core.js';
        import { initGalaxyBackground } from './js/modules/galaxy-bg.js?v=6.5';

        initGalaxyBackground();

        const btnReset = document.getElementById('btn-reset');
        const emailInput = document.getElementById('reset-email');
        const successState = document.getElementById('success-state');
        const form = document.querySelector('.auth-form');

        btnReset.onclick = async () => {
            const email = emailInput.value.trim();
            if (!email) {
                showToast("Introduce un email", "warning");
                emailInput.focus();
                return;
            }

            btnReset.disabled = true;
            btnReset.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando...';

            try {
                await sendPasswordResetEmail(auth, email);
                form.classList.add('hidden');
                successState.classList.remove('hidden');
                setTimeout(() => window.location.href = 'index.html', 4000);
            } catch (e) {
                showToast("No se encontró el email", "error");
                btnReset.disabled = false;
                btnReset.innerHTML = '<i class="fas fa-paper-plane"></i> Enviar Enlace';
            }
        };
    </script>

    <style>
        .hidden {
            display: none !important;
        }
    </style>
    <script type="module">
        import { initGalaxyBackground } from './js/modules/galaxy-bg.js?v=6.5';
        import { initThemeSystem } from './js/modules/theme-manager.js?v=6.5';
        initThemeSystem();
        initGalaxyBackground();
    </script>
</body>

</html>




